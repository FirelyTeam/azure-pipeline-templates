# Repo: FirelyTeam/azure-pipeline-templates
# File: restore.yml

parameters:
  - name: nuGetServiceConnections
    type: object
    displayName: 'Service connections to additional NuGet feeds (optional)'
  - name: nuGetSources
    type: object
    displayName: 'Additional NuGet sources (optional)'
  - name: solutionFile
    type: string
    default: ''
    displayName: 'Solution file for dotnet restore (if not provided, all .sln files in the working directory are used)'

steps:
  - ${{if parameters.nuGetServiceConnections}}:
    - task: NuGetAuthenticate@1
      inputs:
        nuGetServiceConnections: ${{ parameters.nuGetServiceConnections }}

  - powershell: |
      dotnet restore "${{ parameters.solutionFile }}" --source https://api.nuget.org/v3/index.json ${{ parameters.nuGetSources }}
    displayName: 'dotnet restore'