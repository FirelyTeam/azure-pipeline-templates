
steps:
  - powershell: |
      $projectFiles = Get-ChildItem -Recurse -Filter "*.csproj"
      $hasPrerelease = $false
      foreach ($project in $projectFiles) {
          $content = Get-Content $project.FullName
          $packageRefs = $content | Select-String -Pattern '<PackageReference.*Version=".*-.*"'
          
          if ($packageRefs) {
              Write-Error "Prerelease packages found in $($project.Name):"
              $packageRefs | ForEach-Object { Write-Error $_.Line.Trim() }
              $hasPrerelease = $true
          }
      }

      if ($hasPrerelease) {
          exit 1
      }
    displayName: 'Check for pre-release packages in project files'

  